(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(18),n(10),n(11),n(20),n(56),n(5),n(16),n(17),n(21),n(38),n(54),n(55),n(106),n(78),n(79),n(26),n(105),n(81);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o=n(22),a=n(25),i=n(36),s=n(50);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,s,"next",e)}function s(e){u(a,r,o,i,s,"throw",e)}i(void 0)})}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?h(e):t}(this,p(t).call(this,e))).state={manual:!1,autolink:"",manualLink:"",manualTitle:"",manualText:"",posting:!1},n.onDragover=n.onDragover.bind(h(h(n))),n.onDrop=n.onDrop.bind(h(h(n))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r.default.Component),function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(t,[{key:"bookmarklet",value:function(){var e=document.cookie.split(";").map(function(e){return e.trim()}).reduce(function(e,t){var n=f(t.split("="),2),r=n[0],o=n[1];return e[r]=o,e},{});if(!e.hasOwnProperty("auth"))return"";var t=function(){var e=window,t=document,n=t.createElement("div"),r=n.style;function o(e){r.color="#d00",n.textContent=e}function a(){e.setTimeout(function(){r.height="0",e.setTimeout(function(){n.parentNode.removeChild(n)},300)},500)}r.transition="all 200ms",r.position="fixed",r.left="0",r.right="0",r.top="0",r.zIndex=16777271,r.height="0",r.width="100%",r.overflow="hidden",r.background="#fff",r.borderBottom="1px solid #bdbdbd",r.boxShadow="0 0 30px #828282",r.color="#232323",r.fontSize="30px",r.fontWeight="700",r.fontFamily='"PT Serif", Georgia, serif',r.lineHeight="67px",r.textAlign="center",n.textContent="Сохраняю..",t.body.appendChild(n),e.setTimeout(function(){r.height="70px"},100),e.setTimeout(function(){var e=new Headers;e.append("Authorization","Basic #AUTH#"),e.append("Content-Type","application/json"),fetch("#LOCATION#/news",{method:"POST",mode:"cors",credentials:"omit",headers:e,body:JSON.stringify({link:location.href})}).then(function(e){if(200!==e.status)return o("Не смог сохранить"),void a();r.color="#090",n.textContent="Сохранил",a()}).catch(function(){o("Не смог сохранить"),a()})},500)}.toString().replace(/#LOCATION#/g,s.apiRoot).replace(/#AUTH#/g,e.auth).replace(/\s{2,}/g," ");return"javascript:("+encodeURIComponent(t)+")();"}},{key:"render",value:function(){var e=this;return this.props.isAdmin?this.state.manual?r.default.createElement("form",{className:"add-form",onSubmit:function(t){return e.onSubmit(t)},style:this.props.style},r.default.createElement("p",{className:"add-form__manual-switch"},r.default.createElement("span",{role:"button",className:"pseudo",onClick:function(){return e.onSwitch()}},"По ссылке")),r.default.createElement("input",{type:"text",value:this.state.manualLink,onChange:function(t){return e.setState({manualLink:t.target.value})},placeholder:"Ссылка на новость",className:"add-form__article-manual-link",ref:function(t){return e.manualref=t}}),r.default.createElement("input",{type:"text",value:this.state.manualTitle,onChange:function(t){return e.setState({manualTitle:t.target.value})},placeholder:"Название новости",className:"add-form__article-title"}),r.default.createElement("textarea",{value:this.state.manualText,onChange:function(t){return e.setState({manualText:t.target.value})},placeholder:"Описание новости",className:"add-form__article-description"}),r.default.createElement("input",{className:"add-form__submit add-form__submit-manual",type:"submit",value:"Добавить",disabled:0===this.state.manualLink.length||0===this.state.manualTitle.length||0===this.state.manualText.length,title:0===this.state.manualLink.length||0===this.state.manualTitle.length||0===this.state.manualText.length?"Поля должны быть заполнены":""}),this.state.posting&&r.default.createElement("p",{className:"add-form__posting"},"добавляю...")):r.default.createElement("form",{className:"add-form",onSubmit:function(t){return e.onSubmit(t)},style:this.props.style},r.default.createElement("p",{className:"add-form__manual-switch"},r.default.createElement("span",{role:"button",className:"pseudo",onClick:function(){return e.onSwitch()}},"Вручную")),r.default.createElement("div",{className:"add-form__auto"},r.default.createElement("input",{type:"text",value:this.state.autolink,onChange:function(t){return e.setState({autolink:t.target.value})},placeholder:"Ссылка на новость",className:"add-form__article-url",ref:function(t){return e.autoref=t}}),r.default.createElement("input",{className:"add-form__submit add-form__submit-auto",type:"submit",value:"Добавить",disabled:0===this.state.autolink.length,title:0===this.state.autolink.length?'Поле "Ссылка на новость" должно быть заполнено':""})),this.state.posting&&r.default.createElement("p",{className:"add-form__posting"},"добавляю..."),r.default.createElement("p",{className:"add-form__bookmarklet"},r.default.createElement("span",{className:"add-form__bookmarklet-text"},"закладка для быстрого добавления новости:"),r.default.createElement("br",null),r.default.createElement("a",{className:"add-form__bookmarklet-link",href:this.bookmarklet()},"Радио-Т")),r.default.createElement("p",{className:"add-form__drag-message"},"Также можно добавить новость перетянув ссылку на это окно")):r.default.createElement(o.Redirect,{to:"/login/"})}},{key:"onSwitch",value:function(){var e=this;this.setState({manual:!this.state.manual}),setTimeout(function(){(e.autoref||e.manualref).focus()},500)}},{key:"onDragover",value:function(e){-1!==e.dataTransfer.types.indexOf("text/plain")&&(e.dataTransfer.dropEffect="copy",e.preventDefault())}},{key:"onDrop",value:function(){var e=l(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.dataTransfer.types.indexOf("text/plain")){e.next=2;break}return e.abrupt("return");case 2:if(n=t.dataTransfer.getData("text/plain"),/^https?:\/\/.*/.test(n)){e.next=6;break}return e.abrupt("return");case 6:if((o=new URL(n)).origin!==window.location.origin){e.next=9;break}return e.abrupt("return");case 9:return t.preventDefault(),this.setState({posting:!0}),e.prev=11,e.next=14,(0,a.addArticle)(o.href);case 14:(0,i.addNotification)({data:r.default.createElement("b",null,"Новость добавлена"),time:7e3}),this.props.onAdd&&this.props.onAdd(),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(11),console.error(e.t0),(0,i.addNotification)({data:r.default.createElement("b",null,"Произошла ошибка"),level:"error",time:5e3});case 22:return e.prev=22,this.setState({posting:!1}),e.finish(22);case 25:case"end":return e.stop()}},e,this,[[11,18,22,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=this;document.body.addEventListener("dragover",this.onDragover,!1),document.body.addEventListener("drop",this.onDrop,!1),setTimeout(function(){(e.autoref||e.manualref).focus()},500)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("dragover",this.onDragover,!1),document.body.removeEventListener("drop",this.onDrop,!1)}},{key:"onSubmit",value:function(){var e=l(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({posting:!0}),e.prev=2,this.state.manual){e.next=9;break}return e.next=6,(0,a.addArticle)(this.state.autolink);case 6:this.state.autolink="",e.next=14;break;case 9:return e.next=11,(0,a.addArticle)(this.state.manualLink,this.state.manualTitle,this.state.manualText);case 11:this.state.manualLink="",this.state.manualTitle="",this.state.manualText="";case 14:(0,i.addNotification)({data:r.default.createElement("b",null,"Новость добавлена"),time:7e3}),this.props.onAdd&&this.props.onAdd(),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0),(0,i.addNotification)({data:r.default.createElement("b",null,"Произошла ошибка"),level:"error",time:5e3});case 22:return e.prev=22,this.setState({posting:!1}),e.finish(22);case 25:case"end":return e.stop()}},e,this,[[2,18,22,25]])}));return function(t){return e.apply(this,arguments)}}()}]),t}();t.default=v},110:function(e,t){e.exports='<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor #000" d="M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z"></path></svg>'},114:function(e,t,n){"use strict";(function(e){n(18),n(20),n(21),n(10),n(11),n(5),n(16),n(17),n(130),n(131),n(132);var t=y(n(1)),r=n(1),o=n(36),a=n(25),i=n(39),s=y(n(153)),c=n(107),u=n(22),l=n(173),f=y(n(108)),d=n(159),p=y(n(166)),m=y(n(169)),h=y(n(170)),v=y(n(171)),g=y(n(172));function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,s,"next",e)}function s(e){b(a,r,o,i,s,"throw",e)}i(void 0)})}}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),E(this,S(n).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(n,t.default.Component),function(e,t,n){t&&k(e.prototype,t),n&&k(e,n)}(n,[{key:"render",value:function(){var e=this;return t.default.createElement(u.BrowserRouter,null,t.default.createElement("div",{className:"page"},t.default.createElement(s.default,this.props),t.default.createElement(u.Switch,null,t.default.createElement(u.Route,{path:"/",exact:!0,render:function(){return document.title="Новости для Радио-Т",t.default.createElement(d.Listing,e.props)}}),t.default.createElement(u.Route,{path:"/deleted/",exact:!0,render:function(){return document.title="Удаленные темы | Новости Радио-Т",t.default.createElement(d.DeletedListing,e.props)}}),t.default.createElement(u.Route,{path:"/archive/",exact:!0,render:function(){return document.title="Архив | Новости Радио-Т",t.default.createElement(d.ArchiveListing,e.props)}}),t.default.createElement(u.Route,{path:"/add/",exact:!0,render:function(){return document.title="Добавить новость | Новости Радио-Т",t.default.createElement(f.default,e.props)}}),t.default.createElement(u.Route,{path:"/feeds/",exact:!0,render:function(){return document.title="Управление фидами | Новости Радио-Т",t.default.createElement(m.default,e.props)}}),t.default.createElement(u.Route,{path:"/sort/",render:function(){return document.title="Сортировка тем | Новости Радио-Т",t.default.createElement(d.Sorter,e.props)}}),t.default.createElement(u.Route,{path:"/news/:slug",render:function(e){return document.title="".concat(e.match.params.slug," | Новости Радио-Т"),t.default.createElement(p.default,{slug:e.match.params.slug})}}),t.default.createElement(u.Route,{path:"/login/",exact:!0,render:function(){return document.title="Вход | Новости Радио-Т",t.default.createElement(h.default,null)}}),t.default.createElement(u.Route,{component:v.default})),t.default.createElement("div",{className:"footer page__footer"},t.default.createElement("hr",null),t.default.createElement("a",{href:"http://radio-t.com/"},"Radio-T"),","," ",(new Date).getFullYear()),t.default.createElement(g.default,{className:"page__notifications",notifications:this.props.notifications})))}}]),n}();function N(){return(N=_(regeneratorRuntime.mark(function n(){var s,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=(0,a.getTheme)(),document.documentElement.dataset.theme=s,(0,o.setTheme)(s,!0),u=(0,l.connect)(function(e){return e})(O),n.next=6,(0,a.loginViaCookies)().then(function(e){(0,o.setState)({isAdmin:e})});case 6:(0,o.setState)({autoScroll:(0,a.getAutoScroll)()}),(0,r.render)(t.default.createElement(l.Provider,{store:o.store},t.default.createElement(u,null)),document.querySelector(".app")),(0,a.getActiveArticle)().then(function(){var n=_(regeneratorRuntime.mark(function n(r){var s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(0,o.setState)({activeId:r}),n.next=3,(0,i.waitDOMReady)();case 3:s=regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,a.pollActiveArticle)();case 2:if((r=n.sent)!==o.store.getState().activeId){n.next=7;break}return(0,o.removeNotificationsWithContext)("active-article"),(0,o.addNotification)({data:t.default.createElement("b",null,"Тема активирована"),time:3e3}),n.abrupt("return","continue");case 7:(0,o.setState)({activeId:r}),e(_(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.store.getState().autoScroll&&setTimeout(function(){var e=document.querySelector(".post-active");e&&e.scrollIntoView({behavior:"smooth"})},500),(0,i.sleep)(700).then(function(){document.title="* Тема обновлена | Новости Радио-Т"}),e.next=4,(0,a.getArticleById)(r);case 4:(n=e.sent)&&n.hasOwnProperty("title")&&((0,o.removeNotificationsWithContext)("active-article"),(0,o.addNotification)(function(e){return{data:t.default.createElement("span",null,"Тема обновлена:",t.default.createElement("br",null),t.default.createElement(c.HashLink,{to:"/#active-article",onClick:function(){e(),setTimeout(function(){document.getElementById("active-article")||(0,o.addNotification)({data:t.default.createElement("b",null,"Не могу найти тему, надо обновить список"),time:5e3})},500)},scroll:function(e){"/"!==location.pathname?setTimeout(function(){e.scrollIntoView({behavior:"smooth"})},500):e.scrollIntoView({behavior:"smooth"})}},"“",n.title,"”")),time:null,context:"active-article"}}));case 6:case"end":return e.stop()}},e,this)})));case 9:case"end":return n.stop()}},n,this)});case 4:return n.delegateYield(s(),"t0",6);case 6:if("continue"!==n.t0){n.next=9;break}return n.abrupt("continue",4);case 9:n.next=4;break;case 11:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}());case 9:case"end":return n.stop()}},n,this)}))).apply(this,arguments)}(function(){return N.apply(this,arguments)})().catch(function(e){return console.error(e)})}).call(this,n(115).setImmediate)},131:function(e,t,n){},132:function(e,t,n){"use strict";!function(e,t,n,r,o,a,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,a=t.createElement(n),i=t.getElementsByTagName(n)[0],a.async=1,a.src="//www.google-analytics.com/analytics.js",i.parentNode.insertBefore(a,i)}(window,document,"script",0,"ga"),ga("create","UA-148514-6","auto"),ga("send","pageview")},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(10),n(11),n(18),n(5),n(16),n(17),n(21);var r=u(n(1)),o=n(25),a=n(36),i=u(n(80)),s=u(n(155)),c=n(22);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){(0,a.setTheme)(e),(0,o.setTheme)(e)},g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r.default.Component),function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(t,[{key:"render",value:function(){var e=this;return r.default.createElement("div",{className:"header wrapper page__header"},r.default.createElement("h1",{className:"title header__title"},"Новости для Радио-Т"),r.default.createElement("ul",{className:"navigation header__navigation"},this.props.isAdmin&&r.default.createElement("li",{className:"navigation__item navigation__item_admin navigation__item_right navigation__item_logout"},r.default.createElement("span",{role:"button",className:"pseudo navigation__item-link",onClick:function(t){return e.logout()}},"Выйти")),r.default.createElement("li",{className:"navigation__item navigation__item_user"},r.default.createElement(c.NavLink,{to:"/",exact:!0,className:"link navigation__item-link"},"Все темы")),this.props.isAdmin&&r.default.createElement("li",{className:"navigation__item navigation__item_admin",id:"dels-wrap"},r.default.createElement(c.NavLink,{to:"/deleted/",exact:!0,className:"link navigation__item-link"},"Удалённые")),r.default.createElement("li",{className:"navigation__item"},r.default.createElement(c.NavLink,{to:"/archive/",exact:!0,className:"link navigation__item-link"},"Архив")),this.props.isAdmin&&r.default.createElement("li",{className:"navigation__item navigation__item_admin"},r.default.createElement(c.NavLink,{to:"/sort/",exact:!0,className:"link navigation__item-link"},"Сортировать темы")),this.props.isAdmin&&r.default.createElement("li",{className:"navigation__item navigation__item_admin"},r.default.createElement(c.NavLink,{to:"/feeds/",exact:!0,className:"link navigation__item-link"},"Управление фидами")),this.props.isAdmin&&r.default.createElement("li",{className:"navigation__item navigation__item_admin"},r.default.createElement("span",{role:"button",className:"pseudo link navigation__item-link",onClick:function(){return e.update()}},"Обновить базу")),this.props.isAdmin&&r.default.createElement("li",{className:"navigation__item navigation__item_admin"},r.default.createElement("span",{role:"button",className:"pseudo navigation__item-link",onClick:function(){return e.poehali()}},"Поехали!")),this.props.isAdmin&&"day"===this.props.theme&&r.default.createElement("button",{onClick:function(){return v("night")},title:"Поставить ночную тему",className:"inline-button navigation__item navigation__theme-switcher"},"🌚"),this.props.isAdmin&&"night"===this.props.theme&&r.default.createElement("button",{onClick:function(){return v("day")},title:"Поставить дневную тему",className:"inline-button navigation__item navigation__theme-switcher"},"🌞"),this.props.isAdmin&&r.default.createElement("br",null),r.default.createElement(c.Route,{path:"/",exact:!0,render:function(){return r.default.createElement("li",{className:"navigation__item navigation__item_to-current"},r.default.createElement("span",null,r.default.createElement("span",{role:"button",className:"pseudo navigation__item-link",onClick:function(){return e.scrollToCurrent()}},"К текущей теме"),r.default.createElement("span",{role:"button",className:"navigation__scroll-toggle "+(e.props.autoScroll&&!0===e.props.autoScroll?"navigation__scroll-toggle-active":""),onClick:function(){return e.toggleAutoScroll()},title:"Автоматически переходить к текущей теме"},r.default.createElement(i.default,{className:"icon post__comments-icon",svg:s.default}))))}}),r.default.createElement(c.Route,{path:"/news/:slug",render:function(){return r.default.createElement("li",{className:"navigation__item navigation__item_to-comments"},r.default.createElement("a",{role:"button",href:"#to-comments",className:"pseudo navigation__item-link",onClick:function(e){e.preventDefault(),setTimeout(function(){var e=document.getElementById("to-comments");e&&(e.scrollIntoView({behavior:"smooth"}),setTimeout(function(){window.location.hash="to-comments"},500))},200)}},"К комментариям"))}}),!this.props.isAdmin&&"day"===this.props.theme&&r.default.createElement("button",{onClick:function(){return v("night")},title:"Поставить ночную тему",className:"inline-button navigation__item navigation__theme-switcher"},"🌚"),!this.props.isAdmin&&"night"===this.props.theme&&r.default.createElement("button",{onClick:function(){return v("day")},title:"Поставить дневную тему",className:"inline-button navigation__item navigation__theme-switcher"},"🌞")),r.default.createElement("hr",null))}},{key:"logout",value:function(){(0,o.logout)(),(0,a.setState)({isAdmin:!1})}},{key:"update",value:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,s,"next",e)}function s(e){f(a,r,o,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,o.update)().then(function(){(0,a.addNotification)({data:r.default.createElement("b",null,"База обновлена")})}).catch(function(e){console.error(e),(0,a.addNotification)({data:r.default.createElement("b",null,"Не могу обновить базу"),level:"error"})});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toggleAutoScroll",value:function(){var e=!a.store.getState().autoScroll;(0,a.setState)({autoScroll:e}),(0,o.setAutoScroll)(e)}},{key:"scrollToCurrent",value:function(){var e=document.querySelector(".post-active");e?(e.scrollIntoView({behavior:"smooth"}),setTimeout(function(){window.location.hash="active-article"},500)):(0,a.addNotification)({data:r.default.createElement("span",null,"Текущей темы нет")})}},{key:"poehali",value:function(){confirm("Таки поехали?")&&(0,o.startShow)().then(function(){(0,a.addNotification)({data:r.default.createElement("b",null,"Шоу началось")})}).catch(function(e){console.error(e),(0,a.addNotification)({data:r.default.createElement("b",null,"Ошибка при старте шоу"),level:"error"})})}}]),t}();t.default=g},155:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><rect x="0" y="0" width="12" height="12" fill="currentColor #000" stroke="none" style="opacity:0.6"></rect><rect x="0" y="18" width="12" height="12" fill="currentColor #000" stroke="none"></rect><rect x="23" y="2" width="2" height="22" fill="currentColor #000" stroke="none"></rect><polygon points="19,20 29,20 24,26" fill="currentColor #000" stroke="none"></svg>'},159:function(e,t,n){"use strict";n(49),Object.defineProperty(t,"__esModule",{value:!0}),t.Sorter=t.DeletedListing=t.ArchiveListing=t.Listing=t.REMOVE_CHANGE=void 0,n(18),n(109),n(47),n(48),n(34),n(57),n(75),n(76),n(54),n(55),n(20),n(56),n(5),n(16),n(17),n(26),n(21),n(38),n(81),n(10),n(11);var r=p(n(1)),o=n(39),a=n(50),i=n(25),s=n(36),c=n(160),u=p(n(165)),l=n(22),f=p(n(108)),d=p(n(58));function p(e){return e&&e.__esModule?e:{default:e}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function k(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?O(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function T(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){N(a,r,o,i,s,"next",e)}function s(e){N(a,r,o,i,s,"throw",e)}i(void 0)})}}var A=Symbol();function R(e,t){return P.apply(this,arguments)}function P(){return(P=T(regeneratorRuntime.mark(function e(t,n){var r,o,a,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:null,o=(0,s.addNotification)({data:t,time:3e4,context:r}),e.prev=2,e.next=5,n();case 5:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,setTimeout(function(){(0,s.removeNotification)(o)},500),e.finish(7);case 10:case"end":return e.stop()}},e,this,[[2,,7,10]])}))).apply(this,arguments)}t.REMOVE_CHANGE=A;var L=function(e){function t(e){var n;if(b(this,t),n=k(this,E(t).call(this,e)),null===a.newsAutoUpdateInterval)return k(n);n.updateArticle=n.updateArticle.bind(O(O(n))),n.onArticleChange=n.onArticleChange.bind(O(O(n))),n.updateTimestamp=(new Date).getTime();var r=n.update.bind(O(O(n)));n.update=function(){return n.updateTimestamp=(new Date).getTime(),r.apply(void 0,arguments)};var o=setInterval(function(){var e=(new Date).getTime();e-n.updateTimestamp>6e4*a.newsAutoUpdateInterval&&(n.update(),n.updateTimestamp=e)},3e4),i=n.componentWillUnmount.bind(O(O(n)));return n.componentWillUnmount=function(){return clearInterval(o),i.apply(void 0,arguments)},n}return S(t,r.default.Component),w(t,[{key:"componentWillUnmount",value:function(){}},{key:"updateArticle",value:function(e,t){var n=this.state.news.indexOf(e);if(-1!==n){if(t!==A){var r=v({},this.state.news[n],t);return this.setState({news:y(this.state.news.slice(0,n)).concat([r],y(this.state.news.slice(n+1)))}),r}this.setState({news:y(this.state.news.slice(0,n)).concat(y(this.state.news.slice(n+1)))})}}},{key:"onArticleChange",value:function(){var e=T(regeneratorRuntime.mark(function e(t,n){var r,a,c,u,l,f,d,p,m=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=m.length>2&&void 0!==m[2]?m[2]:null,e.t0=n,e.next="make-first"===e.t0?4:"make-current"===e.t0?12:"make-geek"===e.t0?20:"make-ungeek"===e.t0?24:"archive"===e.t0?28:"remove"===e.t0?32:"restore"===e.t0?36:"move"===e.t0?40:49;break;case 4:return a=Math.max.apply(Math,y(this.state.news.map(function(e){return e.position}))),this.updateArticle(t,{position:a+1}),e.next=8,R("делаю тему первой",T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.makeArticleFirst)(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 8:return c=e.sent,u=this.state.news.slice(0).map(function(e){return c.hasOwnProperty(e.id)?v({},e,{position:c[e.id]}):e}),this.setState({news:u}),e.abrupt("break",51);case 12:return(0,s.setState)({activeId:t.id}),e.next=15,R("активирую",T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.activateArticle)(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),"active-article");case 15:if(e.t1=this.update,!e.t1){e.next=19;break}return e.next=19,this.update();case 19:return e.abrupt("break",51);case 20:return this.updateArticle(t,{geek:!0}),e.next=23,R("делаю тему гиковской",T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.makeArticleGeek)(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 23:return e.abrupt("break",51);case 24:return this.updateArticle(t,{geek:!1}),e.next=27,R("делаю тему негиковской",T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.makeArticleNotGeek)(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 27:return e.abrupt("break",51);case 28:return this.updateArticle(t,A),e.next=31,R("убираю в архив",T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.archiveArticle)(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 31:return e.abrupt("break",51);case 32:return this.updateArticle(t,A),e.next=35,R("удаляю",T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.removeArticle)(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 35:return e.abrupt("break",51);case 36:return this.updateArticle(t,A),e.next=39,R("восстанавливаю",T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.restoreArticle)(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 39:return e.abrupt("break",51);case 40:return l=(0,o.first)(this.state.news,function(e){return e.id===r.id}),f=r.from<r.to?.2:-.2,this.updateArticle(l,{position:r.to+f}),e.next=45,(0,i.moveArticle)(r.id,r.to-r.from);case 45:return d=e.sent,p=this.state.news.slice(0).map(function(e){return d.hasOwnProperty(e.id)?v({},e,{position:d[e.id]}):e}),this.setState({news:p}),e.abrupt("break",51);case 49:return console.error("unknown action"),e.abrupt("break",51);case 51:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),t}(),C=function(e){function t(e){var n;return b(this,t),(n=k(this,E(t).call(this,e))).state={postRecentness:(0,i.getRecentness)(),postLevel:(0,i.getPostLevel)(),sort:(0,i.getSorting)(),loaded:!1,news:[],addFormExpanded:!1},n}return S(t,L),w(t,[{key:"render",value:function(){var e=this;if(!this.state.loaded)return r.default.createElement(d.default,null);var t=this.state.postRecentness===a.postRecentness[0]&&this.state.postLevel===a.postLevels[0]&&this.state.sort===a.sortings[0];return r.default.createElement(r.default.Fragment,null,r.default.createElement(u.default,{includeFilters:!0,className:this.props.isAdmin?"listing-actions-all":"",postRecentness:this.state.postRecentness,onRecentnessChange:function(t){e.setState({postRecentness:t}),(0,i.setRecentness)(t)},postLevel:this.state.postLevel,onPostLevelChange:function(t){var n=(0,o.first)(a.postLevels,function(e){return e.title===t});e.setState({postLevel:n}),(0,i.setPostLevel)(n)},sort:this.state.sort,onSortingChange:function(t){e.setState({sort:t}),(0,i.setSorting)(t)}}),this.props.isAdmin&&r.default.createElement("div",{className:"add-form-overlay "+(this.state.addFormExpanded?"add-form-overlay-expanded":"")},!this.state.addFormExpanded&&r.default.createElement("span",{className:"pseudo add-form-overlay__control",onClick:function(){e.setState({addFormExpanded:!0}),setTimeout(function(){var e=document.querySelector(".add-form__article-url")||document.querySelector(".add-form__article-manual-link");e&&e.focus()},500)}},"Добавить новость"),this.state.addFormExpanded&&r.default.createElement("span",{className:"pseudo add-form-overlay__control",onClick:function(){return e.setState({addFormExpanded:!1})}},"Закрыть"),r.default.createElement(f.default,m({},this.props,{style:{display:this.state.addFormExpanded?null:"none"},onAdd:function(){(0,o.sleep)(1e3).then(function(){e.update()})}}))),r.default.createElement("div",{className:"news page__news"},this.state.news.slice(0).filter(function(t,n){return e.state.postRecentness.fn(t,n,e.state.postLevel.hasOwnProperty("isgeek"))&&e.state.postLevel.fn(t,n)}).sort(function(t,n){return e.state.sort.fn(t,n)}).map(function(n,o){var a=n.id===e.props.activeId;return e.props.isAdmin?r.default.createElement(c.ArticleBrief,{key:n.id,article:n,archive:!1,controls:e.props.isAdmin?[a?null:"make-current",t&&0!==o?"make-first":null,n.geek?"make-ungeek":"make-geek","archive","remove"].filter(function(e){return null!==e}):null,active:a,draggable:e.props.isAdmin&&t,onChange:function(t,r){return e.onArticleChange(n,t,r)}}):r.default.createElement(c.ArticleBriefRegular,{key:n.id,article:n,archive:!1,active:a})})))}},{key:"update",value:function(){var e=T(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.getNews)();case 2:t=e.sent,this.setState({news:t,loaded:!0});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.update();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}();t.Listing=C;var j=function(e){function t(e){var n;return b(this,t),(n=k(this,E(t).call(this,e))).state={postRecentness:a.postRecentness[0],postLevel:a.postLevels[0],sort:(0,i.getArchiveSorting)(),news:[],loaded:!1},n}return S(t,L),w(t,[{key:"render",value:function(){var e=this;return this.state.loaded?r.default.createElement(r.default.Fragment,null,r.default.createElement(u.default,{includeFilters:!1,sort:this.state.sort,sortings:a.archiveSortings,onSortingChange:function(t){e.setState({sort:t}),(0,i.setArchiveSorting)(t)}}),r.default.createElement("div",{className:"news page__news"},this.state.news.slice(0).sort(function(t,n){return e.state.sort.fn(t,n)}).map(function(t){return e.props.isAdmin?r.default.createElement(c.ArticleBrief,{key:t.id,article:t,archive:!0,controls:e.props.isAdmin?["remove"]:null,onChange:function(n,r){return e.onArticleChange(t,n,r)}}):r.default.createElement(c.ArticleBriefRegular,{key:t.id,article:t,archive:!0})}))):r.default.createElement(d.default,null)}},{key:"update",value:function(){var e=T(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.getArchiveNews)();case 2:t=e.sent,this.setState({news:t,loaded:!0});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.update();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}();t.ArchiveListing=j;var D=function(e){function t(e){var n;return b(this,t),(n=k(this,E(t).call(this,e))).state={postRecentness:a.postRecentness[0],postLevel:a.postLevels[0],sort:(0,i.getArchiveSorting)(),news:[],loaded:!1},n}return S(t,L),w(t,[{key:"render",value:function(){var e=this;return this.props.isAdmin?this.state.loaded?r.default.createElement("div",{className:"news deleted-news page__news"},this.state.news.map(function(t){return r.default.createElement(c.ArticleBrief,{key:t.id,article:t,controls:e.props.isAdmin?["restore"]:[],onChange:function(n,r){return e.onArticleChange(t,n,r)}})})):r.default.createElement(d.default,null):r.default.createElement(l.Redirect,{to:"/login/"})}},{key:"update",value:function(){var e=T(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.getDeletedNews)();case 2:e.t0=function(e,t){return e.ats===t.ats?0:e.parsedats>t.parsedats?-1:1},t=e.sent.sort(e.t0),this.setState({news:t,loaded:!0});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.update();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}();t.DeletedListing=D;var I=function(e){function t(e){var n;return b(this,t),(n=k(this,E(t).call(this,e))).state={news:[],loaded:!1},n}return S(t,L),w(t,[{key:"update",value:function(){var e=this;(0,i.getNews)().then(function(t){e.setState({news:t,loaded:!0})})}},{key:"componentWillMount",value:function(){var e=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.update();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.isAdmin?this.state.loaded?r.default.createElement("div",{className:"sorter"},this.state.news.slice(0).sort(function(e,t){return e.position===t.position?0:e.position>t.position?-1:1}).map(function(t){return r.default.createElement(c.ArticleSort,{article:t,key:t.id,current:e.props.activeId===t.id,onChange:function(n,r){return e.onArticleChange(t,n,r)}})})):r.default.createElement(d.default,null):r.default.createElement(l.Redirect,{to:"/login/"})}}]),t}();t.Sorter=I},160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArticleSort=t.ArticleBrief=t.ArticleBriefRegular=void 0,n(78),n(26),n(10),n(11),n(18),n(5),n(16),n(17),n(20),n(47),n(48),n(21),n(38),n(81);var r=m(n(1)),o=n(39),a=n(50),i=m(n(161)),s=n(25),c=n(22),u=n(107),l=m(n(58)),f=m(n(80)),d=m(n(164)),p=m(n(110));function m(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=[],x=function(e){function t(){return g(this,t),_(this,w(t).apply(this,arguments))}return k(t,r.default.PureComponent),b(t,[{key:"componentDidMount",value:function(){var e=this;this.onTouchDrag=function(t){var n=e.ref.getBoundingClientRect();t.relativeCoords.y/n.height*100<50?(e.ref.classList.remove("touch-drag-target-bottom"),e.ref.classList.add("touch-drag-target-top")):(e.ref.classList.remove("touch-drag-target-top"),e.ref.classList.add("touch-drag-target-bottom"))}.bind(this),this.ref.addEventListener("RTNEWSDATADRAG",this.onTouchDrag),this.onTouchDragLeave=function(t){e.ref.classList.remove("touch-drag-target-top"),e.ref.classList.remove("touch-drag-target-bottom")}.bind(this),this.ref.addEventListener("".concat("RTNEWSDATADRAG","Leave"),this.onTouchDragLeave),this.onTouchDragEnd=function(t){if(e.ref.classList.remove("touch-drag-target-top"),e.ref.classList.remove("touch-drag-target-bottom"),t.data.position!==e.props.article.position){var n=function(){var n=e.ref.getBoundingClientRect(),r=t.relativeCoords.y/n.height*100<60?1:0;return t.data.position<e.props.article.position&&(r-=1),r}();t.data.position!==e.props.article.position+n&&e.props.onChange&&e.props.onChange("move",{id:t.data.id,from:t.data.position,to:e.props.article.position+n})}}.bind(this),this.ref.addEventListener("".concat("RTNEWSDATADRAG","End"),this.onTouchDragEnd)}},{key:"componentWillUnmount",value:function(){this.ref.removeEventListener("RTNEWSDATADRAG",this.onTouchDrag),this.ref.removeEventListener("".concat("RTNEWSDATADRAG","Leave"),this.onTouchDragLeave),this.ref.removeEventListener("".concat("RTNEWSDATADRAG","End"),this.onTouchDragEnd)}},{key:"onDragStart",value:function(e){var t=this;this.ref.classList.add("drop-item"),this.setState({detailedExpanded:!1}),e.dataTransfer.setData("rtnews/article",JSON.stringify(this.props.article)),e.dataTransfer.setData("rtnews/article-id",this.props.article.id),a.isSafari&&(this.clientY=e.clientY,this.dragInterval=setInterval(function(){t.clientY<=80?window.scrollBy(0,-(80-t.clientY)/2):t.clientY>=window.innerHeight-80&&window.scrollBy(0,(80-(window.innerHeight-t.clientY))/2)},30))}},{key:"onDrag",value:function(e){a.isSafari&&(this.clientY=e.clientY)}},{key:"onDragOver",value:function(e){if(-1!==e.dataTransfer.types.indexOf("rtnews/article")){if(e.preventDefault(),e.dataTransfer.getData("rtnews/article-id")===this.props.article.id)return this.ref.classList.remove("drop-top"),void this.ref.classList.remove("drop-bottom");1===function(){var t=e.currentTarget.getBoundingClientRect();return(e.clientY-t.y)/t.height*100<60?1:0}()?(this.ref.classList.remove("drop-bottom"),this.ref.classList.add("drop-top")):(this.ref.classList.remove("drop-top"),this.ref.classList.add("drop-bottom"))}}},{key:"onDragLeave",value:function(e){this.ref.classList.remove("drop-top"),this.ref.classList.remove("drop-bottom")}},{key:"onDragEnd",value:function(e){clearInterval(this.dragInterval),this.ref.classList.remove("drop-item"),this.ref.classList.remove("drop-top"),this.ref.classList.remove("drop-bottom")}},{key:"onDrop",value:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,s,"next",e)}function s(e){v(a,r,o,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(clearInterval(this.dragInterval),this.ref.classList.remove("drop-item"),this.ref.classList.remove("drop-top"),this.ref.classList.remove("drop-bottom"),-1!==t.dataTransfer.types.indexOf("rtnews/article")){e.next=6;break}return e.abrupt("return");case 6:if(t.preventDefault(),(n=JSON.parse(t.dataTransfer.getData("rtnews/article"))).position!==this.props.article.position){e.next=10;break}return e.abrupt("return");case 10:if(r=function(){var e=t.currentTarget.getBoundingClientRect();return(t.clientY-e.y)/e.height*100<60?1:0}(),n.position<this.props.article.position&&(r-=1),n.position!==this.props.article.position+r){e.next=14;break}return e.abrupt("return");case 14:this.props.onChange&&this.props.onChange("move",{id:n.id,from:n.position,to:this.props.article.position+r});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onHandleTouchStart",value:function(e,t){var n=this;e.touches.length>1||(e.preventDefault(),this.ref.classList.add("touch-drag-item__start"),this.ref.classList.add("touch-drag-item"),this.ref.classList.remove("touch-drag-item__start"),this.initialTouch=e.touches[0],this.initialTransform=this.ref.style.tranform,this.clientY=e.touches[0].clientY,this.dragInterval=setInterval(function(){n.clientY<=80?window.scrollBy(0,-(80-n.clientY)/2):n.clientY>=window.innerHeight-80&&window.scrollBy(0,(80-(window.innerHeight-n.clientY))/2)},30))}},{key:"onHandleTouchMove",value:function(e,t){this.clientY=e.touches[0].clientY;var n=e.touches[0].pageY-this.initialTouch.pageY;this.ref.style.transform="translate(0, ".concat(n,"px)");var r=document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY),o=S.filter(function(e){return-1===r.indexOf(e)}),a=new Event("".concat("RTNEWSDATADRAG","Leave"),{bubbles:!1,cancelable:!1});o.forEach(function(e){return e.dispatchEvent(a)}),(S=r).forEach(function(t){if(t){var n=new Event("RTNEWSDATADRAG",{bubbles:!1,cancelable:!0}),r=t.getBoundingClientRect();n.absoluteCoords={x:e.touches[0].clientX,y:e.touches[0].clientY},n.relativeCoords={x:e.touches[0].clientX-r.x,y:e.touches[0].clientY-r.y},t.dispatchEvent(n)}})}},{key:"onHandleTouchEnd",value:function(e,t){clearInterval(this.dragInterval),this.ref.classList.remove("touch-drag-item"),this.initialTransform?this.ref.style.transform=this.initialTransform:this.ref.style.transform="",document.elementsFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY).forEach(function(n){if(n){var r=new Event("".concat("RTNEWSDATADRAG","End"),{bubbles:!1,cancelable:!0});r.data=t;var o=n.getBoundingClientRect();r.absoluteCoords={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},r.relativeCoords={x:e.changedTouches[0].clientX-o.x,y:e.changedTouches[0].clientY-o.y},n.dispatchEvent(r)}})}}]),t}(),O=function(e){function t(e){var n;return g(this,t),(n=_(this,w(t).call(this,e))).state={articleText:null,detailedExpanded:!1,fetchLock:!1},n}return k(t,x),b(t,[{key:"fetchArticle",value:function(){var e=this;this.state.fetchLock||null===this.state.articleText&&(this.setState({fetchLock:!0}),(0,s.getArticle)(this.props.article.slug).then(function(t){e.setState({articleText:t.content})}).catch(function(t){e.setState({articleText:"Не смог загрузить новость",fetchLock:!1}),console.error(t)}))}},{key:"render",value:function(){var e=this;return r.default.createElement("article",{key:this.props.article.id,ref:function(t){return e.ref=t},id:this.props.active&&"active-article",className:"post "+(this.props.active&&!0===this.props.active?"post-active":"")},this.props.article.pic&&!this.props.archive&&r.default.createElement("div",{className:"post__image-container",style:{backgroundImage:"url(".concat(this.props.article.pic,")")}}),r.default.createElement("h3",{className:"title post__title"},this.props.article.geek&&r.default.createElement(f.default,{className:"icon post__title-geek-icon",svg:p.default,title:"Гиковская тема"}),r.default.createElement(c.Link,{className:"post__title-link",to:"".concat(a.postsPrefix,"/").concat(this.props.article.slug)},this.props.article.title||r.default.createElement("span",{className:"post__empty-title"},"No Title"))),r.default.createElement("div",{className:"post__meta"},r.default.createElement("a",{className:"post__original-link",href:this.props.article.origlink,title:this.props.article.origlink},this.props.article.domain),r.default.createElement("span",{className:"post__timestamp",title:this.props.article.ats,dangerouslySetInnerHTML:{__html:(0,o.formatDate)(new Date(Date.parse(this.props.article.ats)))}}),r.default.createElement(u.HashLink,{className:"post__comments-link",to:"".concat(a.postsPrefix,"/").concat(this.props.article.slug,"#to-comments"),scroll:function(e){setTimeout(function(){e.scrollIntoView({behavior:"smooth"})},500)}},r.default.createElement(f.default,{className:"icon post__comments-icon",svg:d.default}),this.props.article.comments)),!this.props.archive&&[r.default.createElement("div",{key:"paragraph",className:"post__snippet"},r.default.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.article.snippet}})),r.default.createElement("span",{key:"detailed",className:"pseudo post__detailed-link",to:"".concat(a.postsPrefix,"/").concat(this.props.article.slug),ref:function(t){return e.detailedRef=t},onClick:function(t){e.setState({detailedExpanded:!e.state.detailedExpanded}),e.fetchArticle()}},this.state.detailedExpanded?"Скрыть":"Подробнее"),this.state.detailedExpanded&&(null===this.state.articleText?r.default.createElement("div",{className:"post__full-content",key:"fulltext"},r.default.createElement(l.default,null)):r.default.createElement("div",{className:"article-content post__full-content",key:"fulltext"},r.default.createElement("div",{class:"article-content post__full-content-content",dangerouslySetInnerHTML:{__html:this.state.articleText}}),r.default.createElement("div",{className:"post__full-content-hide",onClick:function(){e.detailedRef&&e.detailedRef.scrollIntoView(),e.setState({detailedExpanded:!1})}},"×")))])}}]),t}();t.ArticleBriefRegular=O;var N=function(e){function t(e){var n;return g(this,t),(n=_(this,w(t).call(this,e))).state={articleText:null,detailedExpanded:!1,fetchLock:!1,draggable:!1},n}return k(t,x),b(t,[{key:"fetchArticle",value:function(){var e=this;this.state.fetchLock||null===this.state.articleText&&(this.setState({fetchLock:!0}),(0,s.getArticle)(this.props.article.slug).then(function(t){e.setState({articleText:t.content})}).catch(function(t){e.setState({articleText:"Не смог загрузить новость",fetchLock:!1}),console.error(t)}))}},{key:"render",value:function(){var e=this;return r.default.createElement("article",{key:this.props.article.id,ref:function(t){return e.ref=t},id:this.props.active&&"active-article",className:"post "+(this.props.active&&!0===this.props.active?"post-active":""),draggable:this.state.draggable&&this.props.draggable,onDragStartCapture:function(t){return e.onDragStart(t)},onDrag:function(t){return e.onDrag(t)},onDragOver:function(t){return e.onDragOver(t)},onDragLeave:function(t){return e.onDragLeave(t)},onDragEnd:function(t){return e.onDragEnd(t)},onDrop:function(t){return e.onDrop(t)}},this.props.draggable&&r.default.createElement("div",{className:"post__drag-handle",ref:function(t){return e.handle=t},onMouseEnter:function(){return e.setState({draggable:!0})},onMouseLeave:function(){return e.setState({draggable:!1})},onTouchStart:function(t){return e.onHandleTouchStart(t,e.props.article)},onTouchEnd:function(t){return e.onHandleTouchEnd(t,e.props.article)},onTouchMove:function(t){return e.onHandleTouchMove(t,e.props.article)}}),this.props.controls&&r.default.createElement("div",{className:"post-controls post__controls"},this.props.controls.map(function(t){return r.default.createElement("span",{role:"button",className:"post-controls__control "+"post-controls__control-".concat(t),key:t,onClick:function(){return e.props.onChange&&e.props.onChange(t)}},i.default[t].title)})),this.props.article.pic&&!this.props.archive&&r.default.createElement("div",{className:"post__image-container",style:{backgroundImage:"url(".concat(this.props.article.pic,")")}}),r.default.createElement("h3",{className:"title post__title"},this.props.article.geek&&r.default.createElement(f.default,{className:"icon post__title-geek-icon",svg:p.default,title:"Гиковская тема"}),r.default.createElement(c.Link,{className:"post__title-link",to:"".concat(a.postsPrefix,"/").concat(this.props.article.slug)},this.props.article.title||r.default.createElement("span",{className:"post__empty-title"},"No Title"))),r.default.createElement("div",{className:"post__meta"},r.default.createElement("a",{className:"post__original-link",href:this.props.article.origlink,title:this.props.article.origlink},this.props.article.domain),r.default.createElement("span",{className:"post__timestamp",title:this.props.article.ats,dangerouslySetInnerHTML:{__html:(0,o.formatDate)(new Date(Date.parse(this.props.article.ats)))}}),r.default.createElement(u.HashLink,{className:"post__comments-link",to:"".concat(a.postsPrefix,"/").concat(this.props.article.slug,"#to-comments"),scroll:function(e){setTimeout(function(){e.scrollIntoView({behavior:"smooth"})},500)}},r.default.createElement(f.default,{className:"icon post__comments-icon",svg:d.default}),this.props.article.comments)),!this.props.archive&&[r.default.createElement("div",{key:"paragraph",className:"post__snippet"},r.default.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.article.snippet}})),r.default.createElement("span",{key:"detailed",className:"pseudo post__detailed-link",to:"".concat(a.postsPrefix,"/").concat(this.props.article.slug),ref:function(t){return e.detailedRef=t},onClick:function(t){e.setState({detailedExpanded:!e.state.detailedExpanded}),e.fetchArticle()}},this.state.detailedExpanded?"Скрыть":"Подробнее"),this.state.detailedExpanded&&(null===this.state.articleText?r.default.createElement("div",{className:"post__full-content",key:"fulltext"},r.default.createElement(l.default,null)):r.default.createElement("div",{className:"article-content post__full-content",key:"fulltext"},r.default.createElement("div",{class:"article-content post__full-content-content",dangerouslySetInnerHTML:{__html:this.state.articleText}}),r.default.createElement("div",{className:"post__full-content-hide",onClick:function(){e.detailedRef&&e.detailedRef.scrollIntoView(),e.setState({detailedExpanded:!1})}},"×")))])}}]),t}();t.ArticleBrief=N;var T=function(e){function t(e){var n;return g(this,t),(n=_(this,w(t).call(this,e))).state={draggable:!1},n.controls=function(){return[n.props.current?null:"make-current",n.props.article.geek?"make-ungeek":"make-geek","archive","remove"].filter(function(e){return null!==e})},n}return k(t,x),b(t,[{key:"render",value:function(){var e=this;return r.default.createElement("div",{draggable:this.state.draggable,className:"sorter__item "+(this.props.current?"sorter__item-current":""),ref:function(t){return e.ref=t},onDragStartCapture:function(t){return e.onDragStart(t)},onDrag:function(t){return e.onDrag(t)},onDragOver:function(t){return e.onDragOver(t)},onDragLeave:function(t){return e.onDragLeave(t)},onDragEnd:function(t){return e.onDragEnd(t)},onDrop:function(t){return e.onDrop(t)}},r.default.createElement("div",{className:"sorter__item-content"},r.default.createElement("div",{className:"post-controls sorter__item-controls"},this.controls().map(function(t){return r.default.createElement("span",{role:"button",className:"post-controls__control "+"post-controls__control-".concat(t),key:t,onClick:function(){return e.props.onChange&&e.props.onChange(t)}},i.default[t].title)})),r.default.createElement("div",{className:"sorter__item-header"},this.props.article.geek&&r.default.createElement(f.default,{className:"icon sorter__geek-indicator",svg:p.default,title:"Гиковская тема"}),r.default.createElement(c.Link,{to:"".concat(a.postsPrefix,"/").concat(this.props.article.slug),className:"sorter__item-link"},this.props.article.title.trim())),r.default.createElement("div",{className:"sorter__item-meta"},r.default.createElement("a",{className:"sorter__item-original-link",href:this.props.article.origlink,title:this.props.article.origlink},this.props.article.domain),r.default.createElement("span",{className:"sorter__item-timestamp",title:this.props.article.ats,dangerouslySetInnerHTML:{__html:(0,o.formatDate)(new Date(Date.parse(this.props.article.ats)))}}),r.default.createElement("span",{className:"sorter__comments-link"},r.default.createElement(f.default,{className:"icon sorter__comments-icon",svg:d.default})," ",this.props.article.comments))),r.default.createElement("div",{className:"sorter__item-handle",ref:function(t){return e.handle=t},onMouseEnter:function(){return e.setState({draggable:!0})},onMouseLeave:function(){return e.setState({draggable:!1})},onTouchStart:function(t){return e.onHandleTouchStart(t,e.props.article)},onTouchEnd:function(t){return e.onHandleTouchEnd(t,e.props.article)},onTouchMove:function(t){return e.onHandleTouchMove(t,e.props.article)}},"☰"))}}]),t}();t.ArticleSort=T},161:function(e,t,n){"use strict";n(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={"make-current":{title:"Сделать текущей",id:"make-current"},"make-geek":{title:"Гиковское",id:"make-geek"},"make-ungeek":{title:"Не гиковское",id:"make-ungeek"},"make-first":{title:"Сделать первой",id:"make-first"},archive:{title:"В архив",id:"archive"},remove:{title:"Удалить",id:"remove"},restore:{title:"Восстановить"}}},164:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.851619 6.117109q0 1.327471-.915497 2.452766t-2.487099 1.777591-3.433113.652291q-.53404 0-1.106225-.061033-1.510571 1.335099-3.509404 1.846252-.373828.106809-.869722.167842-.129696.015257-.232689-.068665t-.13351-.221244v-.007628q-.022888-.030516-.003815-.09155t.015258-.076293.034331-.072476l.045775-.068662.053404-.064849.061033-.068662q.053404-.061032.236503-.263205t.263205-.289908.236503-.301349.247947-.389087.205987-.450121.198357-.579813Q1.561073 9.260314.870636 8.260896T.180199 6.117107q0-.991788.541669-1.89584t1.457166-1.56016 2.181933-1.041376 2.654941-.385273q1.86151 0 3.433113.652292t2.487099 1.777589.915497 2.452769z"></path></svg>'},165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(10),n(11),n(5),n(16),n(17),n(109),n(26);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o=n(50);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"render",value:function(){var e=this;return r.default.createElement("div",{className:"listing-actions "+(this.props.className||"")},this.props.includeFilters?r.default.createElement("div",{className:"listing-actions__filters"},this.props.postRecentness&&r.default.createElement("button",{className:"listing-actions__news-recent-button "+(this.props.postRecentness===o.postRecentness[1]?"listing-actions__news-recent-button-active":""),onClick:function(t){var n=e.props.postRecentness===o.postRecentness[0]?o.postRecentness[1]:o.postRecentness[0];e.props.onRecentnessChange&&e.props.onRecentnessChange(n)}},r.default.createElement("span",{style:{borderBottom:"1px dashed"}},"Свежие")),r.default.createElement("select",{className:"listing-actions__news-type-select ".concat(this.props.postLevel.title!==o.postLevels[0].title?"listing-actions__news-type-select-selected":""),value:this.props.postLevel.title,onChange:function(t){return e.props.onPostLevelChange&&e.props.onPostLevelChange(t.target.value)}},o.postLevels.map(function(e){return r.default.createElement("option",{value:e.title,key:e.title},e.title)}))):r.default.createElement("div",null),r.default.createElement("div",{className:"listing-actions__sortings"},r.default.createElement("ul",{className:"sortings-list"},(this.props.sortings||o.sortings).map(function(t){return t.title===e.props.sort.title?r.default.createElement("li",{role:"button",className:"sortings-list__item sortings-list__current-item",key:t.title},r.default.createElement("label",{className:"sortings-list__item-content sortings-list__current-item-content"},r.default.createElement("input",{type:"radio",className:"sortings-list__item-input",checked:"true",name:"post-sortings",value:t.title}),t.title)):r.default.createElement("li",{role:"button",className:"sortings-list__item",onClick:function(n){return e.props.onSortingChange&&e.props.onSortingChange(t)},key:t.title},r.default.createElement("label",{className:"sortings-list__item-content"},r.default.createElement("input",{type:"radio",className:"sortings-list__item-input",name:"post-sortings",value:t.title}),t.title))}))))}}]),t}();t.default=l},166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(10),n(11),n(47),n(48),n(20),n(34),n(57),n(5),n(16),n(17);var r=l(n(1)),o=n(39),a=n(25),i=l(n(167)),s=l(n(58)),c=l(n(80)),u=l(n(110));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=m(this,h(t).call(this,e))).state={article:null},(0,a.getArticle)(e.slug).then(function(e){document.title=e.title+"| Новости Радио-Т",n.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}({},n.state,{article:e}))}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r.default.PureComponent),function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(t,[{key:"render",value:function(){return null===this.state.article?r.default.createElement(s.default,null):r.default.createElement("article",{className:"full-post"},r.default.createElement("h3",{className:"title full-post__title"},this.state.article.geek&&r.default.createElement(c.default,{className:"icon post__title-geek-icon",svg:u.default,title:"Гиковская тема"}),r.default.createElement("a",{className:"post__title-link",href:this.state.article.origlink},this.state.article.title)),r.default.createElement("div",{className:"post__meta full-post__meta"},r.default.createElement("a",{className:"post__original-link",href:this.state.article.origlink,title:this.state.article.origlink},this.state.article.domain),r.default.createElement("span",{className:"post__timestamp",title:this.state.article.ats,dangerouslySetInnerHTML:{__html:(0,o.formatDate)(new Date(Date.parse(this.state.article.ats)))}})),r.default.createElement("div",{className:"article-content full-post__content",dangerouslySetInnerHTML:{__html:this.state.article.content||this.state.article.snippet}}),r.default.createElement("hr",{className:"full-post__break"}),r.default.createElement(i.default,{className:"full-post__comments",id:"to-comments",config:{site_id:"rtnews"}}))}},{key:"componentDidMount",value:function(){setTimeout(function(){var e=window.location.hash;if(""!==e){var t=document.getElementById(e.substr(1));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}},200)}}]),t}();t.default=g},167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(10),n(11),n(49),n(5),n(16),n(17),n(47),n(168),n(38),n(20),n(34),n(57),n(26),n(79);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"render",value:function(){var e=this;return r.default.createElement("div",a({ref:function(t){return e.ref=t},id:"remark42"},this.props))}},{key:"componentDidMount",value:function(){var e=this.props.baseurl||"https://remark42.radio-t.com",t=this.props.config;if(t.site_id){t.url=(t.url||window.location.href).split("#")[0];var n=this.ref,r=Object.keys(t).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))}).join("&");n.innerHTML='\n    <iframe\n      src="'.concat(e,"/web/iframe.html?").concat(r,'"\n      width="100%"\n      frameborder="0"\n      allowtransparency="true"\n      scrolling="no"\n      tabindex="0"\n      title="Remark42"\n      style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important;"\n      horizontalscrolling="no"\n      verticalscrolling="no"\n    ></iframe>\n  ');var o=n.getElementsByTagName("iframe")[0];this.receiveMessages=function(e){try{var t="string"==typeof e.data?JSON.parse(e.data):e.data;t.remarkIframeHeight&&(o.style.height="".concat(t.remarkIframeHeight,"px")),t.scrollTo&&window.scrollTo(window.pageXOffset,t.scrollTo+o.getBoundingClientRect().top+window.pageYOffset),t.hasOwnProperty("isUserInfoShown")&&(t.isUserInfoShown?i.init(t.user||{}):i.close())}catch(e){}},this.postHashToIframe=function(e){var t=e?"#".concat(e.newURL.split("#")[1]):window.location.hash;0===t.indexOf("#".concat("remark42__comment-"))&&(e&&e.preventDefault(),o.contentWindow&&o.contentWindow.postMessage(JSON.stringify({hash:t}),"*"))},this.postClickOutsideToIframe=function(e){o.contains(e.target)||o.contentWindow&&o.contentWindow.postMessage(JSON.stringify({clickOutside:!0}),"*")},window.addEventListener("message",this.receiveMessages),window.addEventListener("hashchange",this.postHashToIframe),document.addEventListener("click",this.postClickOutsideToIframe),setTimeout(this.postHashToIframe,1e3);var a="remark-km423lmfdslkm34",i={node:null,back:null,closeEl:null,iframe:null,style:null,init:function(t){var n=this;this.animationStop(),this.style||(this.style=document.createElement("style"),this.style.setAttribute("rel","stylesheet"),this.style.setAttribute("type","text/css"),this.style.innerHTML="\n          #".concat(a,"-node {\n            position: fixed;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            width: 400px;\n            transition: transform 0.4s ease-out;\n            max-width: 100%;\n            transform: translate(400px, 0);\n          }\n          #").concat(a,"-node[data-animation] {\n            transform: translate(0, 0);\n          }\n          #").concat(a,"-back {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(0,0,0,0.7);\n            opacity: 0;\n            transition: opacity 0.4s ease-out;\n          }\n          #").concat(a,"-back[data-animation] {\n            opacity: 1;\n          }\n          #").concat(a,"-close {\n            top: 0px;\n            right: 400px;\n            position: absolute;\n            text-align: center;\n            font-size: 25px;\n            cursor: pointer;\n            color: white;\n            border-color: transparent;\n            border-width: 0;\n            padding: 0;\n            margin-right: 4px;\n            background-color: transparent;\n          }\n          @media all and (max-width: 430px) {\n            #").concat(a,"-close {\n              right: 0px;\n              font-size: 20px;\n              color: black;\n            }\n          }\n        ")),this.node||(this.node=document.createElement("div"),this.node.id=a+"-node"),this.back||(this.back=document.createElement("div"),this.back.id=a+"-back",this.back.onclick=function(){return n.close()}),this.closeEl||(this.closeEl=document.createElement("button"),this.closeEl.id=a+"-close",this.closeEl.innerHTML="&#10006;",this.closeEl.onclick=function(){return n.close()});var o=r+"&page=user-info&"+"&id=".concat(t.id,"&name=").concat(t.name,"&picture=").concat(t.picture||"","&isDefaultPicture=").concat(t.isDefaultPicture||0);this.node.innerHTML='\n      <iframe\n        src="'.concat(e,"/web/iframe.html?").concat(o,'"\n        width="100%"\n        height="100%"\n        frameborder="0"\n        allowtransparency="true"\n        scrolling="no"\n        tabindex="0"\n        title="Remark42"\n        verticalscrolling="no"\n        horizontalscrolling="no"\n      />'),this.iframe=this.node.querySelector("iframe"),this.node.appendChild(this.closeEl),document.body.appendChild(this.style),document.body.appendChild(this.back),document.body.appendChild(this.node),document.addEventListener("keydown",this.onKeyDown),setTimeout(function(){n.back.setAttribute("data-animation",""),n.node.setAttribute("data-animation",""),n.iframe.focus()},400)},close:function(){this.node&&(this.onAnimationClose(),this.node.removeAttribute("data-animation")),this.back&&this.back.removeAttribute("data-animation"),document.removeEventListener("keydown",this.onKeyDown)},delay:null,events:["","webkit","moz","MS","o"].map(function(e){return e?"".concat(e,"TransitionEnd"):"transitionend"}),onAnimationClose:function(){var e=this,t=this.node;this.node&&(this.delay=setTimeout(this.animationStop,1e3),this.events.forEach(function(n){return t.addEventListener(n,e.animationStop,!1)}))},onKeyDown:function(e){27==e.keyCode&&i.close()},animationStop:function(){var e=i;if(e.node)return e.delay&&(clearTimeout(e.delay),e.delay=null),e.events.forEach(function(t){return e.node.removeEventListener(t,e.animationStop,!1)}),e.remove()},remove:function(){var e=i;e.node&&e.node.remove(),e.back&&e.back.remove(),e.style&&e.style.remove()}}}else console.error("Remark42: Site ID is undefined.")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.receiveMessages),window.removeEventListener("hashchange",this.postHashToIframe),document.removeEventListener("click",this.postClickOutsideToIframe)}}]),t}();t.default=l},169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(10),n(11),n(18),n(5),n(16),n(17),n(21),n(26);var r=c(n(1)),o=n(25),a=n(39),i=n(22),s=c(n(58));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,s,"next",e)}function s(e){l(a,r,o,i,s,"throw",e)}i(void 0)})}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=p(this,m(t).call(this,e))).state={feeds:[],loaded:!1,posting:!1,feedurl:""},(0,o.getFeeds)().then(function(e){n.setState({feeds:e,loaded:!0})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r.default.PureComponent),function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(t,[{key:"render",value:function(){var e=this;return this.props.isAdmin?this.state.loaded?r.default.createElement("div",{className:"feeds"},r.default.createElement("div",{className:"feeds__container"},this.state.feeds.map(function(t){return r.default.createElement("div",{className:"feeds__item",key:t.id},r.default.createElement("h2",{className:"feeds__item-header"},r.default.createElement("a",{className:"feeds__item-link",href:t.feedlink},t.feedlink)),r.default.createElement("span",{className:"feeds__updated-at",dangerouslySetInnerHTML:{__html:"Обновлено в "+(0,a.formatDate)(new Date(Date.parse(t.updated)))}}),r.default.createElement("span",{className:"pseudo feeds__remove-feed",onClick:function(){return e.removeFeed(t)}},"Удалить"))})),r.default.createElement("form",{className:"feeds__add-form",onSubmit:function(t){return e.onSubmit(t)}},r.default.createElement("input",{className:"feeds__add-input",type:"text",placeholder:"Добавить фид",value:this.state.feedurl,onChange:function(t){return e.setState({feedurl:t.target.value})}}),r.default.createElement("input",{className:"feeds__add-submit",type:"submit",value:"Добавить",disabled:0===this.state.feedurl.length})),this.state.posting&&r.default.createElement("span",null,"работаю...")):r.default.createElement(s.default,null):r.default.createElement(i.Redirect,{to:"/login/"})}},{key:"removeFeed",value:function(){var e=f(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Удалить ".concat(t.feedlink,"?"))){e.next=12;break}return this.setState({posting:!0}),e.prev=2,e.next=5,(0,o.removeFeed)(t.id);case 5:return e.next=7,(0,a.sleep)(1e3);case 7:return e.next=9,(0,o.getFeeds)().then(function(e){n.setState({feeds:e})});case 9:return e.prev=9,this.setState({posting:!1}),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[2,,9,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=f(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({posting:!0}),e.prev=2,e.next=5,(0,o.addFeed)(this.state.feedurl);case 5:return e.next=7,(0,a.sleep)(1e3);case 7:return e.next=9,(0,o.getFeeds)().then(function(e){n.setState({feeds:e,feedurl:""})});case 9:return e.prev=9,this.setState({posting:!1}),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[2,,9,12]])}));return function(t){return e.apply(this,arguments)}}()}]),t}();t.default=v},170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(10),n(11),n(18),n(5),n(16),n(17),n(21);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o=n(36),a=n(25),i=n(22);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=l(this,f(t).call(this,e))).state={user:"",password:"",denied:0,loggedIn:!1},(0,a.loginViaCookies)().then(function(e){n.setState({loggedIn:e})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(t,[{key:"render",value:function(){var e=this;return this.state.loggedIn?r.default.createElement(i.Redirect,{to:"/"}):r.default.createElement("form",{className:"login-form",onSubmit:function(t){return e.onSubmit(t)}},r.default.createElement("p",{className:"login-form__header"},"Авторизуйтесь:"),r.default.createElement("input",{className:"login-form__user",type:"text",placeholder:"Логин",value:this.state.user,onChange:function(t){return e.setState({user:t.target.value})}}),r.default.createElement("input",{className:"login-form__password",type:"password",placeholder:"Пароль",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),r.default.createElement("input",{className:"login-form__submit",type:"submit",value:"Войти",disabled:0===this.state.user.length||0===this.state.password.length,title:0===this.state.user.length||0===this.state.password.length?"Поля Логин и Пароль должны быть заполнены":""}),this.state.denied>0&&r.default.createElement("p",{className:"login-form__denied"},"You shall not pass!"))}},{key:"componentDidMount",value:function(){setTimeout(function(){var e=document.querySelector("input.login-form__user");e&&e.focus()},500)}},{key:"onSubmit",value:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,s,"next",e)}function s(e){c(a,r,o,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,(0,a.login)(this.state.user,this.state.password).catch(function(e){return console.error(e),!1});case 3:if(e.sent){e.next=8;break}return this.setState(function(e){return{denied:e.denied+1}}),setTimeout(function(){n.setState(function(e){var t=e.denied-1;return{denied:t<0?0:t}})},7e3),e.abrupt("return");case 8:(0,o.setState)({isAdmin:!0}),this.setState({loggedIn:!0});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}();t.default=p},171:function(e,t,n){"use strict";n(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r.default.createElement("div",{className:"not-found"},r.default.createElement("h1",{className:"not-found__header"},"404"),r.default.createElement("p",{className:"not-found__text"},"Страница не найдена"),r.default.createElement(o.Link,{to:"/",className:"not-found__link"},"На главную"))};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o=n(22)},172:function(e,t,n){"use strict";n(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.default.createElement("div",{className:"notifications"},e.notifications&&e.notifications.slice(0).reverse().map(function(e){return r.default.createElement("div",{className:"notifications__item "+(e.level?"notifications__item-level-".concat(e.level):""),key:e.id},e.data,e.closable&&r.default.createElement("div",{role:"button",className:"notifications__close-item",onClick:function(){return(0,o.removeNotification)(e)}},"×︎"))}))},n(26);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o=n(36)},25:function(e,t,n){"use strict";n(5),Object.defineProperty(t,"__esModule",{value:!0}),t.update=function(){return m("/news/reload",{method:"PUT"})},t.getNews=function(){return m("/news").then(p)},t.getArchiveNews=function(){return m("/news/archive").then(p)},t.getDeletedNews=function(){return m("/news/del").then(p)},t.getArticle=function(e){return g.apply(this,arguments)},t.getArticleById=function(e){return y.apply(this,arguments)},t.getActiveArticle=function(){return m("/news/active").then(function(e){return e.id}).catch(function(){return null})},t.pollActiveArticle=function(){return b.apply(this,arguments)},t.addArticle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r={link:e};t.length>0&&(r.title=t);n.length>0&&(r.snippet=n);var o=new Headers;return o.append("Content-Type","application/json"),m(t.length>0?"/news/manual":"/news",{method:"POST",body:JSON.stringify(r),headers:o})},t.moveArticle=function(e,t){return m("/news/moveid/".concat(e,"/").concat(t),{method:"PUT"})},t.archiveArticle=function(e){return m("/news/archive/".concat(e),{method:"PUT"})},t.activateArticle=function(e){return m("/news/active/".concat(e),{method:"PUT"})},t.removeArticle=function(e){return m("/news/".concat(e),{method:"DELETE"})},t.restoreArticle=function(e){return m("/news/undelete/".concat(e),{method:"PUT"})},t.makeArticleFirst=function(e){return _.apply(this,arguments)},t.makeArticleGeek=function(e){return m("/news/geek/".concat(e),{method:"PUT"})},t.makeArticleNotGeek=function(e){return m("/news/nogeek/".concat(e),{method:"PUT"})},t.getFeeds=function(){return m("/feeds")},t.addFeed=function(e){var t=new Headers;t.append("Content-Type","application/json");var n=JSON.stringify({feedlink:e});return m("/feeds",{method:"POST",headers:t,body:n})},t.removeFeed=function(e){return m("/feeds/"+e,{method:"DELETE"})},t.startShow=function(){return m("/show/start",{method:"PUT"})},t.getRecentness=function(){var e=localStorage.getItem("recentness");return(0,o.first)(r.postRecentness,function(t){return t.title===e})||r.postRecentness[0]},t.setRecentness=function(e){localStorage.setItem("recentness",e.title)},t.getAutoScroll=function(){return"true"===localStorage.getItem("autoScroll")},t.setAutoScroll=function(e){localStorage.setItem("autoScroll",e)},t.getPostLevel=function(){var e=localStorage.getItem("postLevel");return(0,o.first)(r.postLevels,function(t){return t.title===e})||r.postLevels[0]},t.setPostLevel=function(e){localStorage.setItem("postLevel",e.title)},t.getSorting=function(){var e=localStorage.getItem("sorting");return(0,o.first)(r.sortings,function(t){return t.title===e})||r.sortings[0]},t.setSorting=function(e){localStorage.setItem("sorting",e.title)},t.getArchiveSorting=function(){var e=localStorage.getItem("archiveSorting");return(0,o.first)(r.sortings,function(t){return t.title===e})||r.archiveSortings[0]},t.setArchiveSorting=function(e){localStorage.setItem("archiveSorting",e.title)},t.getTheme=function(){var e=localStorage.getItem("theme");return null===e?"day":e},t.setTheme=function(e){localStorage.setItem("theme",e)},t.login=function(e,t){var n=new Headers,o=btoa(e+":"+t);return n.append("Authorization","Basic "+o),fetch(r.apiRoot+"/news/reload",{method:"PUT",headers:n,credentials:"omit",mode:"cors"}).then(function(e){return 200===e.status&&(document.cookie="auth=".concat(o,";max-age=94608000;path=/;samesite=strict"),!0)})},t.loginViaCookies=function(){var e=document.cookie.split(";").map(function(e){return e.trim()}).reduce(function(e,t){var n=t.split("="),r=c(n,2),o=r[0],a=r[1];return e[o]=a,e},{});if(!e.hasOwnProperty("auth"))return Promise.resolve(!1);var t=new Headers,n=e.auth;return t.append("Authorization","Basic "+n),fetch(r.apiRoot+"/news/reload",{method:"PUT",headers:t,credentials:"omit",mode:"cors"}).then(function(e){return 200===e.status}).then(function(e){return e||w(),e})},t.logout=w,n(76),n(54),n(55),n(143),n(21),n(10),n(11),n(18),n(20),n(34),n(75),n(145),n(49),n(78),n(79),n(105),n(26),n(56),n(106);var r=n(50),o=n(39);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)})}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=/(\t|\s)+/g,f=/([^\s\\]{16})/gm;function d(e){return"object"!==u(e)||null===e?e:(e.hasOwnProperty("snippet")&&(e.snippet=e.snippet.replace(l," ").replace(f,"$1&shy;")),e.hasOwnProperty("ts")&&(e.parsedts=Date.parse(e.ts)),e.hasOwnProperty("ats")&&(e.parsedats=Date.parse(e.ats)),e.hasOwnProperty("activets")&&(e.parsedactivets=Date.parse(e.activets)),e)}function p(e){return Array.isArray(e)?e.map(d):e}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.hasOwnProperty("headers")||(t.headers=new Headers);var n=document.cookie.split(";").map(function(e){return e.trim()}).reduce(function(e,t){var n=c(t.split("="),2),r=n[0],o=n[1];return e[r]=o,e},{});return n.hasOwnProperty("auth")&&t.headers.append("Authorization","Basic "+n.auth),fetch(r.apiRoot+e+"?timestamp=".concat((new Date).getTime()),Object.assign({mode:"cors",credentials:"omit"},t)).then(function(e){if(e.status>=400)throw e.statusText;return e.json().catch(function(e){return null})})}var h=new Map,v=new Map;function g(){return(g=s(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.has(t)){e.next=2;break}return e.abrupt("return",Promise.resolve(h.get(t)));case 2:return e.next=4,m("/news/slug/"+encodeURIComponent(t)).then(d);case 4:return n=e.sent,h.set(t,n),v.set(n.id,n.slug),e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function y(){return(y=s(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.has(t)){e.next=2;break}return e.abrupt("return",Promise.resolve(h.get(v.get(t))));case 2:return e.next=4,m("/news/id/"+encodeURIComponent(t)).then(d);case 4:return n=e.sent,h.set(n.slug,n),v.set(n.id,n.slug),e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function b(){return(b=s(regeneratorRuntime.mark(function e(){var t,n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:295;case 1:return e.next=4,m("/news/active/wait/".concat(t));case 4:if(null==(n=e.sent)||!n.hasOwnProperty("id")){e.next=7;break}return e.abrupt("return",n.id);case 7:e.next=1;break;case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _(){return(_=s(regeneratorRuntime.mark(function e(t){var n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/news/positions");case 2:if((n=e.sent).hasOwnProperty(t)){e.next=5;break}throw new Error("Can't find id's position");case 5:return r=n[t],o=Math.max.apply(Math,a(Object.values(n))),i=o-r,e.abrupt("return",m("/news/moveid/".concat(t,"/").concat(i),{method:"PUT"}));case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function w(){document.cookie="auth=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/"}},36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setState=u,t.addNotification=function(e){if("function"==typeof e){var t={};Object.assign(t,f(e(function(){c.dispatch({type:"removeNotification",notification:t})}))),e=t}else e=f(e);c.dispatch({type:"addNotification",notification:e}),null!==e.time&&setTimeout(function(){c.dispatch({type:"removeNotification",notification:e})},e.time);return e},t.removeNotification=function(e){c.dispatch({type:"removeNotification",notification:e})},t.removeNotificationsWithContext=function(e){u({notifications:c.getState().notifications.filter(function(t){return t.context!==e})})},t.setTheme=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(u({theme:e}),t)return void(document.documentElement.dataset.theme=e);++d,document.documentElement.classList.add("switch-transition"),setTimeout(function(){document.documentElement.dataset.theme=e,setTimeout(function(){--d<1&&document.documentElement.classList.remove("switch-transition")},1500)},10)},t.store=void 0,n(75),n(76),n(54),n(55),n(10),n(11),n(56),n(47),n(20),n(34),n(57),n(5),n(48),n(49),n(38);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1));function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={isAdmin:!1,notifications:[],activeId:null,autoScroll:!1,theme:"day"},c=(0,n(82).createStore)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setState":return a({},e,t.state);case"addNotification":return a({},e,{notifications:o(e.notifications).concat([t.notification])});case"removeNotification":var n=e.notifications.indexOf(t.notification);return n<0?e:a({},e,{notifications:o(e.notifications.slice(0,n)).concat(o(e.notifications.slice(n+1)))});default:return e}});function u(e){c.dispatch({type:"setState",state:e})}t.store=c;var l=0,f=function(e){return"string"==typeof e&&(e={data:r.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),time:3e3,level:"default"}),"string"==typeof e.data&&(e.data=r.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.data}})),e.id=l++,(e=Object.assign({context:null,level:"default",time:3e3,closable:!0},e)).data.key=e.id,e};var d=0},39:function(e,t,n){"use strict";function r(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)})}}function a(e){return new Promise(function(t){return setTimeout(t,e)})}function i(){return(i=o(regeneratorRuntime.mark(function e(t){var n,r,a,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:1e3,(!(i.length>2&&void 0!==i[2])||i[2])&&t(),r=0,a=function(){var e=o(regeneratorRuntime.mark(function e(){var o,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((o=i.length>0&&void 0!==i[0]?i[0]:0)-n>r)){e.next=5;break}return e.next=4,t();case 4:r=o;case 5:requestAnimationFrame(a);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),requestAnimationFrame(a);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function s(){return(s=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("complete"!==document.readyState){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,a(200);case 5:e.next=0;break;case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}n(5),Object.defineProperty(t,"__esModule",{value:!0}),t.first=function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;if(t(s))return s}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return null},t.firstIndex=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return null},t.formatDate=function(e){var t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),r=e.getFullYear(),o=("0"+e.getHours()).slice(-2),a=("0"+e.getMinutes()).slice(-2);return t+"."+n+"."+r+" в&nbsp;"+o+":"+a},t.oneOf=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o=0;o<n.length;o++){var a=n[o];if(e===a)return!0}return!1},t.sleep=a,t.animate=function(e){return i.apply(this,arguments)},t.waitDOMReady=function(){return s.apply(this,arguments)},n(21),n(18),n(10),n(11),n(20)},50:function(e,t,n){"use strict";n(5),Object.defineProperty(t,"__esModule",{value:!0}),t.postLevels=t.postRecentness=t.archiveSortings=t.sortings=t.isSafari=t.newsAutoUpdateInterval=t.postsPrefix=t.apiRoot=void 0,n(48),n(38);t.apiRoot="https://news.radio-t.com/api/v1";t.postsPrefix="/news";t.newsAutoUpdateInterval=10;var r=-1!==window.navigator.userAgent.indexOf("Safari");t.isSafari=r;var o=[{title:"По приоритету",fn:function(e,t){return e.position===t.position?0:e.position>t.position?-1:1}},{title:"По дате новости",fn:function(e,t){return e.ts===t.ts?0:e.parsedts>t.parsedts?-1:1}},{title:"По дате добавления",fn:function(e,t){return e.ats===t.ats?0:e.parsedats>t.parsedats?-1:1}},{title:"По комментариям",fn:function(e,t){return e.comments===t.comments?0:e.comments>t.comments?-1:1}}];t.sortings=o;var a=o.filter(function(e){return"По приоритету"!==e.title});t.archiveSortings=a;var i=new Date,s=[{title:"Все",fn:function(e,t){return!0}},{title:"Свежие",fn:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=i-e.parsedats;return!!(n&&e.geek&&r<7776e6)||r<18144e5}}];t.postRecentness=s;t.postLevels=[{title:"Все",fn:function(e,t){return!0}},{title:"Обычные",fn:function(e,t){return!e.geek}},{title:"Гиковские",fn:function(e,t){return e.geek},isgeek:!0}]},58:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(10),n(11),n(49),n(5),n(16),n(17),n(162);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,c(t).call(this,e))).state={numberOfDots:4},n.interval=setInterval(function(){n.setState(function(e){return{numberOfDots:(e.numberOfDots+1)%7}})},500),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"render",value:function(){return r.default.createElement("div",a({className:"loading"},this.props),this.props.text||"Загружаю",r.default.createElement("span",{className:"loading__dots"},".",".".repeat(this.state.numberOfDots)))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}}]),t}();t.default=l}},[[114,1,2]]]);